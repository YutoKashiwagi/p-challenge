 課題1

## 1
HTTPはステートレスなプロトコルであるため、サーバーとクライアント間で状態を表現するための手段としてcookieを使う

サーバー側がSet-Cookieレスポンスヘッダーにcookieの名前と値を挿入してレスポンスを返すことで、クライアント(ブラウザ)はCookieを確認できる

## 2
送信できない
ポートが異なるとオリジンが異なるため

## 3
送信できない
サブドメインが異なるとオリジンが異なるため

## 4
送信できる
Domainが指定された場合、サブドメインは常に含まれるため

> Domain が指定された場合、サブドメインは常に含まれます。したがって、 Domain を指定すると省略時よりも制限が緩和されます。ただし、サブドメイン間でユーザーに関する情報を共有する場合は有用になるでしょう。例えば、Domain=mozilla.org を設定すると、developer.mozilla.org のようなサブドメインも含まれます。

https://developer.mozilla.org/ja/docs/Web/HTTP/Cookies

## 5
防げる
サーバーがSet-CookieにHttp-Only属性を付ければ良い

## 6
可能
サーバーがSet-CookieにSecure属性を付ければ良い

## 7
- Expiresの指定なし
  - ブラウザを閉じると削除される
- Expiresの指定あり
  - 期限を指定したクッキーはその期間中、ブラウザを閉じても削除されない

## 8
SameSite属性を指定することにより、オリジン間リクエストの際にCookieを送るべきかどうかの制御を行うことができる

サーバーがSet-CookieヘッダーのSameSite属性に指定することで実現でき、以下の制御三つのレベルがある

```
Lax
Cookie はトップレベルナビゲーションで送信することが許可されており、サードパーティの Web サイトによって開始された GET リクエストとともに送信されます。これは、モダンブラウザのデフォルト値です。

Strict
Cookie はファーストパーティのコンテキストでのみ送信され、サードパーティの Web サイトによって開始されたリクエストと一緒に送信されることはありません。

None
Cookie はすべてのコンテキストで送信されます。つまり、クロスオリジンの送信が許可されます。

```

[参考](https://developer.mozilla.org/ja/docs/Web/HTTP/Headers/Set-Cookie/SameSite)

## 9
cookieに保存すべきでない情報

- 容量が大きい(4MBより大きい)情報
- サーバーに送る必要のない、フロントエンドのみで保持すべき情報
- email, パスワードなどのセキュアな情報、または暗号化されていない平文

## 10
- cookieを使うべきタイミング
  - サーバーに送信する必要があるもの(ログイン情報など)

- local storageを使うべきタイミング
  - クライアント側のみで保持すべき情報。cookieと異なり、送信するかどうかをクライアント側で決めることができるのが特徴
    - カラーテーマの設定情報など

# 11
掲示板でのXSSの仕組み

1. ユーザーからの入力値を自由に表示できる投稿部分で、悪意のあるユーザーがHTMLやJavaScriptのコードを含んだ投稿を行う。

悪意のあるJSコード例: HTMLのaタグを偽装し、リンクを踏んでしまった人のcookieをdocument.cookieで取得し、それを外部サイトに送信する

2. 何もしらないユーザが上記のリンクを踏み、cookie情報を抜き出される

対策例
- ユーザーからの入力値はサニタイズして表示する
- ブラウザからcookieに対してdocument.cookieでアクセスできないように、cookieにHttp-Only属性を加える

# 課題2(クイズ)

## 1
課題1-7のCookieのExpires属性を指定していないものは、一般的に何クッキーと呼ばれるでしょう？

## 2
クッキーモンスターバグが発生してしまう仕組みを簡潔に説明してください

## 3
次の記述には間違いが含まれています。理由と共に間違っている箇所を教えてください

「SameSite属性をNoneに指定する時、Secure属性は指定しないのが推奨されている」
